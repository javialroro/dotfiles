#!/usr/bin/env bash

SESSION_NAME="javi"

# Verifica si la sesi칩n existe
tmux has-session -t $SESSION_NAME 2>/dev/null

if [ $? != 0 ]; then
  tmux new-session -d -s $SESSION_NAME -n yazi 'yazi'
  tmux new-window -t $SESSION_NAME -n scratch
  tmux new-window -t $SESSION_NAME -n opencode '/home/javialroro/.opencode/bin/opencode .'
  tmux select-window -t $SESSION_NAME:yazi
fi

if [ -z "$TMUX" ]; then
  # Si no est치s en tmux, atachate directamente en la ventana "yazi"
  tmux attach-session -t $SESSION_NAME -c "$(tmux display-message -p -t $SESSION_NAME:yazi '#{pane_current_path}')"
  tmux select-window -t $SESSION_NAME:yazi
else
  # Ya est치s en tmux, entonces solo cambia de sesi칩n y selecciona ventana
  tmux switch-client -t $SESSION_NAME
  tmux select-window -t $SESSION_NAME:yazi
fi
